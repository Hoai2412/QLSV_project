<div class="category-wrapper">
    <h2 class="section-title"><i class="fas fa-list"></i> QUẢN LÝ DANH MỤC</h2>

    <div class="tab-container">
        <button class="tab-btn active" data-tab="tab-khoa">Quản lý Khoa</button>
        <button class="tab-btn" data-tab="tab-nganh">Quản lý Ngành</button>
        <button class="tab-btn" data-tab="tab-mon">Quản lý Môn học</button>
    </div>

    <div id="tab-khoa" class="tab-content active">
        <div class="search-box">
            <input type="text" id="searchKhoa" placeholder="Tìm tên hoặc mã khoa..." class="form-control">
            <button class="btn btn-search" onclick="searchData('khoa')"><i class="fa fa-search"></i> Tìm</button>
            <button class="btn btn-secondary" onclick="reloadData('khoa')" title="Làm mới"><i class="fa fa-sync"></i></button>
            <button class="btn btn-add" onclick="openModalKhoa()"><i class="fa fa-plus"></i> Thêm Khoa</button>
        </div>
        <div class="table-responsive">
            <table class="table-admin">
                <thead>
                    <tr>
                        <th>Mã Khoa</th>
                        <th>Tên Khoa</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody id="tbodyKhoa"></tbody>
            </table>
        </div>
    </div>

    <div id="tab-nganh" class="tab-content">
        <div class="search-box">
            <select id="filterKhoaForNganh" class="form-control" style="max-width: 200px;">
                <option value="">-- Tất cả Khoa --</option>
            </select>
            <input type="text" id="searchNganh" placeholder="Tìm tên ngành..." class="form-control">
            <button class="btn btn-search" onclick="searchData('nganh')"><i class="fa fa-search"></i> Tìm</button>
            <button class="btn btn-secondary" onclick="reloadData('nganh')" title="Làm mới"><i class="fa fa-sync"></i></button>
            <button class="btn btn-add" onclick="openModalNganh()"><i class="fa fa-plus"></i> Thêm Ngành</button>
        </div>
        <div class="table-responsive">
            <table class="table-admin">
                <thead>
                    <tr>
                        <th>Mã Ngành</th>
                        <th>Tên Ngành</th>
                        <th>Thuộc Khoa</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody id="tbodyNganh"></tbody>
            </table>
        </div>
    </div>

    <div id="tab-mon" class="tab-content">
        <div class="search-box">
            <select id="filterKhoaForMon" class="form-control" style="max-width: 180px;">
                <option value="">-- Lọc theo Khoa --</option>
            </select>
            <select id="filterNganhForMon" class="form-control" style="max-width: 180px;">
                <option value="">-- Lọc theo Ngành --</option>
            </select>
            <input type="text" id="searchMon" placeholder="Tìm tên môn..." class="form-control">
            <button class="btn btn-search" onclick="searchData('mon')"><i class="fa fa-search"></i> Tìm</button>
            <button class="btn btn-secondary" onclick="reloadData('mon')" title="Làm mới"><i class="fa fa-sync"></i></button>
            <button class="btn btn-add" onclick="openModalMon()"><i class="fa fa-plus"></i> Thêm Môn</button>
        </div>
        <div class="table-responsive">
            <table class="table-admin">
                <thead>
                    <tr>
                        <th>Mã MH</th>
                        <th>Tên Môn Học</th>
                        <th>Số TC</th>
                        <th>Ngành</th>
                        <th>Khoa</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody id="tbodyMon"></tbody>
            </table>
        </div>
    </div>
</div>

<div id="modalKhoa" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('modalKhoa')">&times;</span>
        <h3 id="titleKhoa">Thêm Khoa Mới</h3>
        <form id="formKhoa">
            <input type="hidden" id="idKhoa"> <div class="form-group">
                <label>Mã Khoa:</label>
                <input type="text" id="inputMaKhoa" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Tên Khoa:</label>
                <input type="text" id="inputTenKhoa" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-save">Lưu lại</button>
        </form>
    </div>
</div>

<div id="modalNganh" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('modalNganh')">&times;</span>
        <h3 id="titleNganh">Thêm Ngành Mới</h3>
        <form id="formNganh">
            <input type="hidden" id="idNganh">
            <div class="form-group">
                <label>Thuộc Khoa:</label>
                <select id="selectKhoaInNganh" class="form-control" required></select>
            </div>
            <div class="form-group">
                <label>Mã Ngành:</label>
                <input type="text" id="inputMaNganh" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Tên Ngành:</label>
                <input type="text" id="inputTenNganh" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-save">Lưu lại</button>
        </form>
    </div>
</div>

<div id="modalMon" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('modalMon')">&times;</span>
        <h3 id="titleMon">Thêm Môn Học Mới</h3>
        <form id="formMon">
            <input type="hidden" id="idMon">
            
            <div class="form-group">
                <label>Chọn Khoa:</label>
                <select id="selectKhoaInMon" class="form-control" required onchange="loadNganhByKhoa(this.value, 'selectNganhInMon')">
                    <option value="">-- Chọn Khoa --</option>
                </select>
            </div>
            <div class="form-group">
                <label>Chọn Ngành:</label>
                <select id="selectNganhInMon" class="form-control" required>
                    <option value="">-- Vui lòng chọn Khoa trước --</option>
                </select>
            </div>

            <div class="form-group">
                <label>Mã Môn:</label>
                <input type="text" id="inputMaMon" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Tên Môn:</label>
                <input type="text" id="inputTenMon" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Số Tín Chỉ:</label>
                <input type="number" id="inputSoTC" class="form-control" value="3" required>
            </div>
            <button type="submit" class="btn btn-save">Lưu lại</button>
        </form>
    </div>
</div>

<style>
    /* CSS Riêng cho trang Category */
    .tab-container { border-bottom: 2px solid #ddd; margin-bottom: 20px; }
    .tab-btn { padding: 10px 20px; border: none; background: none; cursor: pointer; font-size: 16px; font-weight: bold; color: #666; }
    .tab-btn.active { border-bottom: 3px solid #0056b3; color: #0056b3; }
    .tab-content { display: none; animation: fadeIn 0.3s; }
    .tab-content.active { display: block; }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
    .modal.show { display: flex; }
    .modal-content { background: #fff; padding: 25px; border-radius: 8px; width: 500px; max-width: 90%; position: relative; }
    .close { position: absolute; right: 15px; top: 10px; font-size: 24px; cursor: pointer; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    /* Trong public/css/main.css */
.btn-secondary {
    background-color: #0b3b92; 
    color: white;
    margin-left: 5px; /* Cách nút tìm kiếm một chút */
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-secondary:hover {
    background-color: #0056b3;
}
</style>